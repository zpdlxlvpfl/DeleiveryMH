<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hwyj.mapper.OrderMapper">

	<resultMap type="com.hwyj.domain.OrderVO" id="orderMap">
		<result property="order_no" column="order_no" />
		<result property="res_code" column="res_code" />
		<result property="res_menu_code" column="res_menu_code" />
		<result property="res_menu_price" column="res_menu_price" />
		<result property="res_menu_acount" column="res_menu_acount" />
		<result property="order_date" column="order_date" />
		<result property="order_count" column="order_count" />
	</resultMap>
	
	<select id="OrderList" resultType="HashMap">
			SELECT * 
			from testdb.order 
			right join cart on cart.id=order.id 
			right join res_menu on res_menu.res_menu_code=cart.res_menu_code
			where testdb.order.id=#{id}
	</select>



	<insert id="insertOrder"  parameterType="com.hwyj.domain.OrderVO">
		<!--  INSERT INTO testdb.order
		(order_no,res_code,res_menu_code,res_menu_price,
		res_menu_acount,del_id,id,order_date,order_count)
		VALUES 
		(#{order_no},
		#{res_code},
		#{res_menu_code},
		#{res_menu_price},
		#{res_menu_acount},
		#{del_id},
		#{id},
		now(),
		#{order_count}) -->
		
		insert into testdb.order   (id,res_menu_code,order_count)
		select id,res_menu_code,amount from cart where res_menu_code is not null
		
	</insert>
	
	
	</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
  
<mapper namespace="com.hwyj.mapper.RestaurantMapper">

	<resultMap type="com.hwyj.domain.ResVO" id="memberMap">
	<result property="RES_NAME" column="RES_NAME" />
	<result property="RES_ADDRESS"  column="RES_ADDRESS"/>
	<result property="RES_TEL" column="RES_TEL" />
	<result property="RES_MENU_EXPLAN" column="RES_MENU_EXPLAN" />
	</resultMap>
	
	<resultMap type="com.hwyj.domain.ResMenuVO" id="restMap">
	<result property="RES_CODE" column="RES_NAME" />
	<result property="m_name"  column="RES_ADDRESS"/>
	<result property="red_menu_code" column="RES_TEL" />
	<result property="res_menu_name" column="res_menu_name" />
	<result property="RES_MENU_EXPLAN" column="RES_MENU_EXPLAN" />
	<result property="res_menu_price" column="res_menu_price" />
	</resultMap>
	
		
<!--  메뉴보기 (식당이름, 메뉴이름, 메뉴설명, 메뉴가격) -->
	<select id="readMenu" resultType="com.hwyj.domain.ResMenuVO">	
	select m_name, res_menu_name, res_menu_explan, res_menu_price from res_menu left outer join member on res_menu.res_code=member.res_code
	where res_menu.res_code=#{res_code}
	</select>
	
	<!-- 이미지저장 테스트 -->
	<insert id="saveImage" parameterType="java.util.Map">
		INSERT INTO testdb.img_table VALUES #({img})
	</insert>

	<!-- 메장등록 -->
	<insert id="insertres" parameterType="com.hwyj.domain.ResVO">
		INSERT INTO testdb.res
		(RES_CODE,RES_NAME,RES_INFO,DEL_PRICE)
		VALUES 
		(#{RES_CODE},
		#{RES_NAME},
		#{RES_INFO},
		#{DEL_PRICE})
	</insert>
	
		<!-- 메뉴 등록 -->
	<insert id="insertmenu" parameterType="com.hwyj.domain.ResMenuVO">
		INSERT INTO testdb.res_menu
		(res_code,
		res_menu_code,
		res_menu_name,
		res_menu_explan,
		res_menu_price)
		VALUES 
		(#{res_code},
		#{res_menu_code},
		#{res_menu_name},
		#{res_menu_explan},
		#{res_menu_price})
	</insert>

</mapper>